import{c as E,G as S,r as s,j as t,L as y,B as C,H as N}from"./index-D3DWexQO.js";function B(){const g=E(),{postId:a}=S.useParams(),[n,c]=s.useState(""),[o,u]=s.useState(""),[r,m]=s.useState(""),[h,p]=s.useState(!1),[x,d]=s.useState(""),i=function(){d("")},f=async function(e){e.preventDefault();const l=[];if(n.trim()==""||r.trim()=="")return;if(o!=""&&o.split(",").forEach(v=>{l.push(v.trim())}),l.length>5){d("too many tags");return}const b={title:n,content:r,tags:[...l]};await N(b,a),g({to:"/"}),p(!0)},j=async function(){const e=await C(a);c(e.title),m(e.content),u(e.tags.join(","))};return s.useEffect(()=>{p(!1),j()},[]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"main margin-top-xl",children:[t.jsxs(y,{to:"/posts/$postId",params:{postId:a},className:"blue underline",children:["<-"," Back to post"]}),t.jsx("h1",{children:"Edit Post"}),t.jsxs("form",{className:"new-post-form",onSubmit:f,children:[t.jsx("label",{htmlFor:"title",children:"Title"}),t.jsx("input",{id:"title",type:"text",value:n,onChange:function(e){c(e.target.value),i()}}),t.jsx("label",{htmlFor:"content",children:"Content"}),t.jsx("textarea",{id:"content",value:r,onChange:function(e){m(e.target.value),i()}}),t.jsx("label",{htmlFor:"tags",children:"Tags (optional)"}),t.jsx("input",{placeholder:"comma separated",id:"tags",type:"text",value:o,onChange:function(e){u(e.target.value),i()}}),t.jsx("button",{className:"button margin-top",disabled:h,children:"EDIT"}),t.jsx("p",{className:"error",children:x})]})]})})}export{B as component};
