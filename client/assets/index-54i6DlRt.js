import{r as a,j as e,L as P,b as R}from"./index-6LOgL6T7.js";function F(){const[l,g]=a.useState(""),[i,f]=a.useState(""),[c,h]=a.useState(""),[m,x]=a.useState(""),[j,u]=a.useState(!1),[w,r]=a.useState(""),[b,v]=a.useState(!1),[d,S]=a.useState(""),[y,p]=a.useState(!1),o=function(){r("")},C=function(s){if(r(""),s.target.files&&s.target.files[0]){if(s.target.files[0].size>15e5){r("Image must be under 1.5MB");return}const n=new FileReader;n.readAsDataURL(s.target.files[0]),n.onloadend=async()=>{const t=n.result;typeof t=="string"&&S(t)}}},N=async function(s){if(s.preventDefault(),p(!0),i!=c){r("Passwords do not match");return}if(i.length<6){r("Password must be at least 6 characters");return}u(!0);const n={username:l,password:i,email:m,profilePic:d};try{const t=await R(n);if(t&&t.message==="User registered successfully")v(!0),p(!1);else throw r(t.error),new Error(t)}catch(t){console.log(t)}finally{u(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main margin-top-xl",children:[e.jsx("h1",{children:"Register"}),y===!1?e.jsx("div",{children:b?e.jsxs("div",{className:"center",children:[e.jsx("p",{children:"Registration complete"}),e.jsx(P,{to:"/login",className:"blue underline",children:"Go to Login page"})]}):e.jsxs("form",{className:"new-post-form",onSubmit:N,children:[e.jsx("img",{src:d||"blank_profile.jpg",className:"profile-image-upload"}),e.jsx("label",{htmlFor:"profile-image",children:"Profile picture (optional)"}),e.jsx("input",{className:"image-upload-input",id:"profile-image",type:"file",onChange:C}),e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:l,onChange:function(s){g(s.target.value),o()}}),e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:m,onChange:function(s){x(s.target.value),o()}}),e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:i,onChange:function(s){f(s.target.value),o()}}),e.jsx("label",{htmlFor:"confirm-password",children:"Confirm password"}),e.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:function(s){h(s.target.value),o()}}),e.jsx("button",{className:"button margin-top",disabled:j,children:"REGISTER"}),e.jsx("p",{className:"error",children:w})]})}):e.jsxs("div",{className:"center margin-top-xl",children:[e.jsx("h2",{className:"center margin-top-xl",children:"Creating new account...."}),e.jsx("p",{className:"center margin-top-xl",children:"Free server is slow..."})]})]})})}export{F as component};
